{
  "entities": {
    "Product": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Product",
      "type": "object",
      "description": "Represents a product in the Lint Microfiber Hub catalog.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the product."
        },
        "nome": {
          "type": "string",
          "description": "The name of the product."
        },
        "descrizionebreve": {
          "type": "string",
          "description": "A short description of the product, may contain HTML."
        },
        "immagine": {
          "type": "string",
          "description": "URL of the product image.",
          "format": "uri"
        },
        "prezzo": {
          "type": "number",
          "description": "The price of the product. Might not be present in all documents."
        },
        "categorie": {
          "type": "string",
          "description": "The category the product belongs to (e.g., Microfiber Cloth, Cleaning Accessory)."
        },
        "SKU": {
          "type": "string",
          "description": "Technical specifications or product codes, if applicable."
        }
      },
      "required": [
        "id",
        "nome",
        "descrizionebreve",
        "immagine",
        "categorie"
      ]
    },
    "Testimonial": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Testimonial",
      "type": "object",
      "description": "Represents a customer testimonial or case study.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the testimonial."
        },
        "author": {
          "type": "string",
          "description": "The name of the customer or company providing the testimonial."
        },
        "content": {
          "type": "string",
          "description": "The text content of the testimonial."
        },
        "date": {
          "type": "string",
          "description": "The date the testimonial was given.",
          "format": "date-time"
        },
        "companyType": {
          "type": "string",
          "description": "The type of company providing the testimonial (e.g., Cleaning Company, Car Detailing Service)."
        }
      },
      "required": [
        "id",
        "author",
        "content",
        "date",
        "companyType"
      ]
    },
    "QuoteRequest": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "QuoteRequest",
      "type": "object",
      "description": "Represents a quote request submitted by a B2B client.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the quote request."
        },
        "name": {
          "type": "string",
          "description": "The name of the person submitting the quote request."
        },
        "companyName": {
          "type": "string",
          "description": "The name of the company requesting the quote."
        },
        "email": {
          "type": "string",
          "description": "The email address of the person submitting the quote request.",
          "format": "email"
        },
        "phoneNumber": {
          "type": "string",
          "description": "The phone number of the person submitting the quote request."
        },
        "products": {
          "type": "string",
          "description": "Additional product requests."
        },
        "message": {
          "type": "string",
          "description": "A message with additional details."
        },
        "requestDate": {
          "type": "string",
          "description": "The date the quote was requested.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "companyName",
        "email",
        "phoneNumber",
        "message",
        "requestDate"
      ]
    },
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user account.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "email": {
          "type": "string",
          "description": "User's email address.",
          "format": "email"
        },
        "firstName": {
          "type": "string",
          "description": "User's first name."
        },
        "lastName": {
          "type": "string",
          "description": "User's last name."
        },
        "phoneNumber": {
          "type": "string",
          "description": "User's phone number."
        },
        "creationDate": {
          "type": "string",
          "description": "The date the user was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "email",
        "firstName",
        "lastName",
        "creationDate"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/prodotti/{prodottoId}",
        "definition": {
          "entityName": "Product",
          "schema": {
            "$ref": "#/backend/entities/Product"
          },
          "description": "Stores product information. Publicly accessible.",
          "params": [
            {
              "name": "prodottoId",
              "description": "Unique identifier for the product."
            }
          ]
        }
      },
      {
        "path": "/testimonials/{testimonialId}",
        "definition": {
          "entityName": "Testimonial",
          "schema": {
            "$ref": "#/backend/entities/Testimonial"
          },
          "description": "Stores customer testimonials. Publicly accessible.",
          "params": [
            {
              "name": "testimonialId",
              "description": "Unique identifier for the testimonial."
            }
          ]
        }
      },
      {
        "path": "/quoteRequests/{quoteRequestId}",
        "definition": {
          "entityName": "QuoteRequest",
          "schema": {
            "$ref": "#/backend/entities/QuoteRequest"
          },
          "description": "Stores quote requests submitted by B2B clients.",
          "params": [
            {
              "name": "quoteRequestId",
              "description": "Unique identifier for the quote request."
            }
          ]
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user account information. Accessible only by the authenticated user.",
          "params": [
            {
              "name": "userId",
              "description": "Unique identifier for the user."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the Lint Microfiber Hub application's core features, focusing on products, testimonials, quote requests, and user management. It prioritizes authorization independence, clarity, and scalability.\n\n*   **Products:** Products are stored in a flat `prodotti` collection, which simplifies listing and querying. No authorization is required to view the product catalog. Products are considered public data and thus need no additional complexity for access control.\n*   **Testimonials:** Testimonials are stored in a flat `testimonials` collection, which simplifies listing and querying. Testimonials are considered public data and thus need no additional complexity for access control.\n*   **Quote Requests:** Quote requests are stored in a `quoteRequests` collection. No authorization is required to submit a quote request.\n*   **Users:** User data is stored in a `users` collection, with each user having their own document identified by their UID. This structure enables easy management of user profiles and related data. This private data is stored under `/users/{userId}`.\n\n**Authorization Independence:**  The `prodotti`, `testimonials`, and `quoteRequests` collections do not require authorization, as they are considered public. The `users` collection is path-based ownership, enabling Authorization Independence.\n\n**QAPs Support:**\n*   The flat structure of `prodotti` and `testimonials` enables efficient `list` operations for displaying the product catalog and testimonials.\n*   Quote requests are stored in a dedicated `quoteRequests` collection, allowing for easy management and retrieval of quote requests.\n*   User data is segregated into individual user documents, ensuring that only the authenticated user can access their data."
  }
}
